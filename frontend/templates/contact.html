<div class="contact-modal" id="contact-modal" hidden aria-hidden="true">
  <div class="modal__overlay contact-modal__overlay" data-contact-overlay></div>
  <div class="contact-modal__panel" role="dialog" aria-modal="true" aria-labelledby="contact-dialog-title"
    tabindex="-1">
    <header class="contact-modal__header">
      <div>
        <p class="muted" data-i18n="modal.header">{{ _('modal.header') }}</p>
        <h2 id="contact-dialog-title" data-i18n="contact.title">{{ _('contact.title') }}</h2>
      </div>
      <button class="modal-close lightbox-close modal-close--absolute" type="button" data-contact-close
        data-i18n-attr="aria-label:modal.close" aria-label="Close">
        <svg class="modal-close__icon" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" focusable="false"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="8" y1="8" x2="24" y2="24" />
          <line x1="24" y1="8" x2="8" y2="24" />
        </svg>
      </button>
    </header>
    <div class="contact-modal__grid">
      <!-- Card 1: Professional Summary style (match about card) -->
      <article class="contact-card contact__intro modal__card" role="listitem">
        <h3 data-i18n="contact.intro_title">{{ _('contact.intro_title') }}</h3>
        <p class="muted lead" data-i18n="contact.resumo_text">{{ _('contact.resumo_text') | safe }}</p>
        <div class="card__actions" style="justify-content:center;">
          {% if _('contact.cta.resume') %}
          <button id="resume-btn" type="button" class="contact-modal__btn card__btn" data-i18n="contact.cta.resume">{{
            _('contact.cta.resume') }}</button>
          {% endif %}
        </div>
      </article>

      <!-- Card 2: Actions / Links (stacked anchors using contact button styling) -->
      <article class="contact-card contact__actions modal__card" role="listitem">
        <div class="contact-card__content">
          <h3 data-i18n="contact.actions_title">{{ _('contact.actions_title') }}</h3>

          <div class="contact-card__links">

            <a class="contact-modal__btn card__btn" href="{{ _('contact.social.github_url') }}" target="_blank"
              rel="noopener" data-i18n="contact.social.github">{{ _('contact.social.github') }}</a>
            <a class="contact-modal__btn card__btn" href="{{ _('contact.social.linkedin_url') }}" target="_blank"
              rel="noopener" data-i18n="contact.social.linkedin">{{ _('contact.social.linkedin') }}</a>
            {% if _('contact.cta.schedule') and _('contact.schedule_url') %}
            <a class="contact-modal__btn card__btn" href="{{ _('contact.schedule_url') }}" target="_blank"
              rel="noopener" data-i18n="contact.cta.schedule">{{ _('contact.cta.schedule') }}</a>
            {% endif %}
            <!-- Optional: Instagram if available in config -->
            {% if config.INSTAGRAM_URL %}
            <a class="contact-modal__btn card__btn" href="{{ config.INSTAGRAM_URL }}" target="_blank" rel="noopener"
              data-i18n="contact.cta.instagram">{{ _('contact.cta.instagram') }}</a>
            {% endif %}
            {% if _('contact.cta.copy_email') and _('contact.email') %}
            <button type="button" class="contact-modal__btn card__btn" data-copy-email="{{ _('contact.email') }}"
              data-i18n="contact.cta.copy_email" aria-label="{{ _('contact.cta.copy_email') }}">{{
              _('contact.cta.copy_email') }}</button>
            {% endif %}
          </div>
        </div>
      </article>

      <!-- Card 3: Message Form -->
      <article class="contact-card contact__form modal__card modal__card--wide" role="listitem">
        <div class="contact-card__content">
          <h3 data-i18n="contact.form.title">{{ _('contact.form.title') }}</h3>
          <form id="contact-form" class="contact-form" action="/contact" method="post" novalidate>
            <div class="form-row">
              <label for="contact-name" data-i18n="contact.form.name_label">{{ _('contact.form.name_label') }}</label>
              <input id="contact-name" name="name" type="text" required autocomplete="name" />
            </div>

            <div class="form-row">
              <label for="contact-email" data-i18n="contact.form.email_label">{{ _('contact.form.email_label')
                }}</label>
              <input id="contact-email" name="email" type="email" required autocomplete="email" />
            </div>

            <div class="form-row">
              <label for="contact-subject" data-i18n="contact.form.subject_label">{{ _('contact.form.subject_label')
                }}</label>
              <input id="contact-subject" name="subject" type="text" />
            </div>

            <div class="form-row">
              <label for="contact-message" data-i18n="contact.form.message_label">{{ _('contact.form.message_label')
                }}</label>
              <textarea id="contact-message" name="message" rows="6" required></textarea>
            </div>

            <!-- Honeypot anti-spam field (hidden from users) -->
            <div style="position:absolute;left:-10000px;top:auto;overflow:hidden;" aria-hidden="true">
              <label for="hp">Do not fill</label>
              <input id="hp" name="hp" tabindex="-1" autocomplete="off" />
            </div>

            <!-- Processing notice: explains how the message and data are used -->
            <div class="form-row consent-row" id="contact-consent-row" aria-describedby="contact-consent-desc">
              <p id="contact-consent-desc" class="muted small" data-i18n="contact.form.processing_notice">
                {{ _('contact.form.processing_notice') | safe }}
                &nbsp;<a href="/privacy" class="muted-link" data-i18n="links.privacy">{{ _('links.privacy') }}</a>
              </p>

              <!-- Optional marketing/newsletter consent (NOT required) -->
              <label class="muted" for="consent_marketing">
                <input id="consent_marketing" type="checkbox" name="consent_marketing" value="yes" /> 
                <span data-i18n="contact.form.marketing_consent">{{ _('contact.form.marketing_consent') }}</span>
              </label>
            </div>

            <div class="card__actions">
              <button type="submit" class="card__btn">{{ _('contact.form.submit') }}</button>
            </div>

            <div id="contact-form-status" role="status" aria-live="polite" class="muted" hidden></div>
          </form>
        </div>
      </article>
    </div>
  </div>
  <div id="aria-live-contact" aria-live="polite" style="position:absolute;left:-10000px;top:auto;overflow:hidden;"
    aria-atomic="true"></div>

</div>